@model Mind.WebUI.Models.VpnUpdateViewModel
@{
    ViewData["Title"] = "Edit VPN";
}
<div id="crumbs">
    <ul>
        <li><a href="/Home"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        <li><a href="/Tenant/GetAll"><i class="fa" aria-hidden="true"></i> Tenants</a></li>
        <li><a href="/Vpn/GetAllByTenantId?tenantId=@ViewBag.Tenant.TenantId"><i class="fa active" aria-hidden="true"></i>VPNs - [@ViewBag.Tenant.Name]</a></li>
        <li class="active"><a href="#"><i class="fa" aria-hidden="true"></i>Edit - [@Model.Name]</a></li>
    </ul>
</div>
<h2>Edit VPN '@Model.Name'</h2>
<form id="form" asp-action="Edit">

    @{await Html.RenderPartialAsync("_ValidationModelErrorPartial");}

    <input type="hidden" asp-for="VpnId" />
    <input type="hidden" asp-for="TenantId" />
    <input type="hidden" asp-for="TopologyType" />
    <input type="hidden" asp-for="RowVersion" />
    <input type="hidden" asp-for="Name" />
    <input type="hidden" asp-for="Stage" />
    <input type="hidden" asp-for="SyncToNetwork" />

    <div id="editVpnWizard">

        <h3>Name and Description</h3>
        <section id="name-and-description">
            <br />
            <div mind-alert="info" message="
                Give the VPN a description.">
            </div>
            <div class="form-group row">
                <label asp-for="Description" class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <input asp-for="Description" class="form-control" />
                    <span asp-validation-for="Description" class="text-danger" />
                </div>
            </div>
            <br />
            <div mind-alert="info" message="
                Extranets are a special type of VPN which provide a 'cross-connect' between two or more other VPNs.
                Enable the extranet option to create a cross-connect VPN.">
            </div>
            <div class="form-group row">
                <label class="col-form-label col-sm-2"></label>
                <div class="col-sm-10">
                    <div class="custom-control custom-checkbox">
                        <input class="form-check-input custom-control-input" type="checkbox" asp-for="IsExtranet" data-toggle="tooltip"
                               title="Enable extranet VPN" data-placement="left" />
                        <label class="form-check-label custom-control-label" asp-for="IsExtranet"></label>
                    </div>
                </div>
            </div>
        </section>
        <h3>Tenancy Type</h3>

        <section id="tenancyType">
            <br />
            <div mind-alert="info" message="
                Select a tenancy type for the VPN. A tenancy type of 'single' means that only sites which belong to the tenant who owns
                the VPN can be attached to the VPN. If the tenancy type is 'multi' then any site belonging to any tenant can
                be attached to the VPN.">
            </div>
            <div class="form-group row">
                <label asp-for="TenancyType" class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <select asp-for="TenancyType" class="form-control" asp-items="ViewBag.TenancyType">
                        <option value="">-- Select Tenancy Type --</option>
                    </select>
                    <span asp-validation-for="TenancyType" class="text-danger"></span>
                </div>
            </div>
        </section>

        <h3>Region</h3>
        <section id="region">
            <br />
            <div mind-alert="info" message="
                Optionally select a geographical region. If this option is selected then only sites in the specified
                region can be attached to the VPN.">
            </div>
            <div class="form-group row">
                <label asp-for="Region" class="col-sm-2 col-form-label"></label>
                <div class="col-sm-10">
                    <select asp-for="Region" class="form-control" asp-items="ViewBag.Region">
                        <option value="None">-- Optionally Select Region --</option>
                    </select>
                    <span asp-validation-for="Region" class="text-danger"></span>
                </div>
            </div>
        </section>

        <!-- View component for displaying a grid of attachment sets which belong to the vpn -->
        @await Component.InvokeAsync("VpnAttachmentSets", new
        {
            vpnAttachmentSetRequests = Model.VpnAttachmentSets
        })

    </div>
</form>

<div>
    <a mind-nav-link-back-btn="true" asp-action="GetAllByTenantID" asp-route-tenantID="@ViewBag.Tenant.TenantId">Back to VPNs</a>
</div>

<!-- Loading Spinner partial view -->
@{await Html.RenderPartialAsync("_LoadingSpinnerPartial");}

<!-- Stage or sync to network partial view -->
@{await Html.RenderPartialAsync("_NetworkStageOrSyncModalPartial");}

<!-- Duplicate item dialog partial view -->
@{await Html.RenderPartialAsync("_DuplicateItemDialogPartial");}

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    @{await Html.RenderPartialAsync("_VpnEditScriptsPartial");}
}
