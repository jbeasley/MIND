(n=>{function s(t){var u=n("#routing-instance-grid"),f=r(t),e=u.find("tbody"),o=JSON.stringify(f),i=n.Deferred();return n.ajax({url:"GetAttachmentSetRoutingInstancesGridData",contentType:"application/json; charset=utf-8",type:"POST",data:o,success:function(n){e.html(n);l();i.resolve()}}),i.promise()}function h(t){var r=n("#bgp-ip-network-inbound-policy-grid"),u=a(t),f=JSON.stringify(u),i=n.Deferred();return n.ajax({url:"GetBgpIpNetworkInboundPolicyGridData",contentType:"application/json; charset=utf-8",type:"POST",data:f,success:function(n){var t=r.find("tbody");t.html(n);l();i.resolve()}}),i.promise()}function c(t){var r=n("#bgp-ip-network-outbound-policy-grid"),u=v(t),f=JSON.stringify(u),i=n.Deferred();return n.ajax({url:"GetBgpIpNetworkOutboundPolicyGridData",contentType:"application/json; charset=utf-8",type:"POST",data:f,success:function(n){var t=r.find("tbody");t.html(n);RefreshValidation();i.resolve()}}),i.promise()}function r(t){typeof t=="undefined"&&(t=[]);var i=n("#routing-instance-grid"),r=i.find("tbody tr");return r.each(function(){var i=n(this),r=i.data("name"),u=i.data("local-ip-routing-preference"),f=i.data("advertised-ip-routing-preference");t.push({RoutingInstanceName:r,LocalIpRoutingPreference:u,AdvertisedIpRoutingPreference:f})}),t}function a(t){var i,u,f;return typeof t=="undefined"&&(t=[]),i=n("#bgp-ip-network-inbound-policy-grid").find("tbody tr"),i.each(function(){var i=n(this),r=i.data("tenant-id"),u=i.data("cidr-name"),f=i.data("local-ip-routing-preference"),e=i.data("add-to-all-bgp-peers-in-attachment-set"),o=i.data("ipv4-peer-address");t.push({TenantId:r,TenantIpNetworkCidrName:u,AddToAllBgpPeersInAttachmentSet:e,Ipv4PeerAddress:o,LocalIpRoutingPreference:f})}),u=r(),f=u.map(function(n){return n.RoutingInstanceName}),{RoutingInstanceNames:f,VpnTenantIpNetworkInRequests:t}}function v(t){var i,u,f;return typeof t=="undefined"&&(t=[]),i=n("#bgp-ip-network-outbound-policy-grid").find("tbody tr"),i.each(function(){var i=n(this),r=i.data("tenant-id"),u=i.data("tenant-name"),f=i.data("cidr-name"),e=i.data("advertised-ip-routing-preference"),o=i.data("add-to-all-bgp-peers-in-attachment-set"),s=i.data("ipv4-peer-address");t.push({TenantId:r,TenantName:u,TenantIpNetworkCidrName:f,AddToAllBgpPeersInAttachmentSet:o,Ipv4PeerAddress:s,AdvertisdIpRoutingPreference:e})}),u=r(),f=u.map(function(n){return n.RoutingInstanceName}),{RoutingInstanceNames:f,VpnTenantIpNetworkOutRequests:t}}function l(){var t=n("#form");t.removeData("validator");t.removeData("unobtrusiveValidation");n.validator.unobtrusive.parse("#form")}const u=n("#RoutingInstance"),f=u[0];n("#addRoutingInstance").on("click",function(){var r=n("#routing-instance-grid"),t;if(f.value!==null&&f.value!==""){var e=u.find(":selected"),i=e.data("name"),o=r.find('td > input[type="text"]').filter(function(){return this.value===i}).length>0;o?n("#duplicateItemModal").modal():(t=[],t.push({RoutingInstanceName:i}),s(t).then(()=>{h(),c()}))}});n("#routing-instance-grid").on("click",".mind-grid-delete-row",function(){var t=n(this).data("row-id"),i=n("#routing-instance-grid-row_"+t);i.remove();s().then(function(){RefreshBgpIpNetworkInboundPolicyGrid();RefreshBgpIpNetworkOutboundPolicyGrid()})});n("#addInboundIpNetwork").on("click",function(){var f=n("#bgp-ip-network-inbound-policy-grid"),e=n("#TenantId"),o=e[0],i=n("#InboundIpNetwork"),r=i[0],t;if(r.value!==null&&r.value!==""){var s=i.find(":selected"),u=s.data("cidr-name"),c=f.find('td > input[type="text"]').filter(function(){return this.value===u}).length>0;c?n("#duplicateItemModal").modal():(t=[],t.push({TenantId:o.value,TenantIpNetworkCidrName:u}),h(t))}});n("#addOutboundIpNetwork").on("click",function(){var e=n("#bgp-ip-network-outbound-policy-grid"),o=n("#RemoteTenantId"),s=o[0],i=n("#OutboundIpNetwork"),r=i[0],t;if(r.value!==null&&r.value!==""){var u=i.find(":selected"),f=u.data("cidr-name"),h=u.data("tenant-name"),l=e.find('td > input[type="text"]').filter(function(){return this.value===f}).length>0;l?n("#duplicateItemModal").modal():(t=[],t.push({TenantId:s.value,TenantName:h,TenantIpNetworkCidrName:f}),c(t))}});n("#bgp-ip-network-inbound-policy-grid").on("click",".mind-grid-delete-row",function(){var t=n(this).data("row-id"),i=n("#bgp-ip-network-inbound-policy-grid-row_"+t);i.remove();RefreshBgpIpNetworkInboundPolicyGrid()});n("#bgp-ip-network-outbound-policy-grid").on("click",".mind-grid-delete-row",function(){var t=n(this).data("row-id"),i=n("#bgp-ip-network-outbound-policy-grid-row_"+t);i.remove();RefreshBgpIpNetworkOutboundPolicyGrid()});n(".mind-grid").on("change",".mind-grid-checkbox",function(){this.value=this.checked});const e=n("#RemoteTenantId"),t=e[0],o=n("#OutboundIpNetwork"),i=o[0];i.disabled=!0;e.on("change",function(){t.value===null||t.value===""?(i.selectedIndex=0,i.disabled=!0):Mind.Utilities.populateElement(o,"TenantIpNetworks",{tenantId:t.value})})})(jQuery);