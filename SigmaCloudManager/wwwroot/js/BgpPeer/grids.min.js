(function(n){function p(t){var i=n("#bgp-peer-grid-row_"+t);i.remove()}function w(t){var r=n("#bgp-peer-grid"),u=rt(t),f=r.find("tbody"),e=JSON.stringify(u),i=n.Deferred();return n.ajax({url:"GetBgpPeerGridData",contentType:"application/json; charset=utf-8",type:"POST",data:e,success:function(n){f.html(n);i.resolve()}}),i.promise()}function rt(t){typeof t=="undefined"&&(t=[]);var i=n("#bgp-peer-grid"),r=i.find("tbody tr");return r.each(function(){var i=b(n(this));t.push(i)}),t}function b(n){var t=n.data("bgp-peer-id"),i=n.data("ipv4-peer-address"),r=n.data("peer-password"),u=n.data("peer-2-byte-as"),f=n.data("maximum-routes"),e=n.data("is-bfd-enabled"),o=n.data("is-multihop");return{BgpPeerId:t,Ipv4PeerAddress:i,PeerPassword:r,Peer2ByteAutonomousSystem:u,MaximumRoutes:f,IsBfdEnabled:e,IsMultiHop:o}}function k(){u.value="";f.value="";o.value="";e.value="";t.value="";s.value=a.data("default-value");h.checked=/true/i.test(v.data("default-value"));c.checked=/true/i.test(y.data("default-value"))}var r=n("#bgpPeerModal"),l=n("#bgpPeerForm"),d=n("#BgpPeerId"),g=n("#Ipv4PeerAddress"),nt=n("#Peer2ByteAutonomousSystem"),tt=n("#PeerPassword"),a=n("#MaximumRoutes"),v=n("#IsBfdEnabled"),y=n("#IsMultiHop"),it=n("#RowId"),u=d[0],f=g[0],e=nt[0],o=tt[0],s=a[0],h=v[0],c=y[0],t=it[0],i=n("#bgpPeersComponent");i.on("click","#showBgpPeerFormBtn",function(){r.modal("show").off("hidden.bs.modal").on("hidden.bs.modal",function(){k()})});n("#saveBgpPeer").on("click",function(){if(l.validate(),l.valid()){r.modal("hide");t.value!==null&&t.value!==""&&p(t.value);var n=[];n.push({BgpPeerId:u.value,Ipv4PeerAddress:f.value,PeerPassword:o.value,Peer2ByteAutonomousSystem:e.value,MaximumRoutes:s.value,IsBfdEnabled:h.checked,IsMultiHop:c.checked});w(n)}});i.on("click",".mind-grid-delete-row",function(){var t=n(this).data("row-id");p(t);w()});i.on("click",".mind-grid-edit-row",function(){var l=n(this).data("row-id"),a=n("#bgp-peer-grid-row_"+l),i=b(a);u.value=i.BgpPeerId;f.value=i.Ipv4PeerAddress;e.value=i.Peer2ByteAutonomousSystem;o.value=i.PeerPassword;h.checked=/true/i.test(i.IsBfdEnabled);c.checked=/true/i.test(i.IsMultiHop);s.value=i.MaximumRoutes;t.value=l;r.modal("show").off("hidden.bs.modal").on("hidden.bs.modal",function(){k()})});i.on("change",".mind-grid-checkbox",function(){this.value=this.checked})})(jQuery);