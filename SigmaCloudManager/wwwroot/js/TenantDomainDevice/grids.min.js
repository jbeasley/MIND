(function(n){function b(t){var i=n("#port-grid-row_"+t);i.remove()}function p(t){var r=n("#port-grid"),u=ct(t),f=r.find("tbody"),e=JSON.stringify(u),i=n.Deferred();return n.ajax({url:"GetPortsGridData",contentType:"application/json; charset=utf-8",type:"POST",data:e,success:function(n){f.html(n);i.resolve()}}),i.promise()}function ct(t){typeof t=="undefined"&&(t=[]);var i=n("#port-grid"),r=i.find("tbody tr");return r.each(function(){var i=w(n(this));t.push(i)}),t}function w(n){var t=n.data("port-id"),i=n.data("port-type"),r=n.data("port-name"),u=n.data("port-bandwidth-gbps"),f=n.data("port-connector"),e=n.data("port-status"),o=n.data("port-sfp"),s=n.data("port-role"),h=n.data("port-pool"),c=n.data("tenant-id");return{PortId:t,PortType:i,PortName:r,PortBandwidthGbps:u,PortConnector:f,PortSfp:o,PortStatus:e,PortRole:s,PortPool:h,TenantId:c}}function k(){f.value="";e.value="";o.value="";s.selectedIndex=0;i.value="";h.selectedIndex=0;c.selectedIndex=0;l.selectedIndex=0;a.selectedIndex=0;v.selectedIndex=0;y.value=""}function d(){n("#port-grid > tbody > tr").filter(function(){return/true/i.test(n(this).data("is-new"))}).addClass("mind-grid-highlight-row")}var r=n("#portModal"),t=n("#portForm"),g=n("#PortId"),nt=n("#PortType"),tt=n("#PortName"),it=n("#PortBandwidthGbps"),rt=n("#PortConnector"),ut=n("#PortSfp"),ft=n("#PortStatus"),et=n("#PortRole"),ot=n("#PortPool"),st=n("#AssignedTenantId"),ht=n("#RowId"),f=g[0],e=nt[0],o=tt[0],s=it[0],h=rt[0],c=ut[0],l=ft[0],a=et[0],v=ot[0],y=st[0],i=ht[0],u=n("#portsComponent");r.on("show.bs.modal",function(){n("#pills-type-name-tab").tab("show")}).on("hidden.bs.modal",function(){k()});u.on("click","#showPortFormBtn",function(){r.modal("show")});t.bind("invalid-form.validate",function(){var i=t.data("validator");n('#pills-tab a[href="#'+n(i.errorList[0].element).closest(".tab-pane").attr("id")+'"]').tab("show")});n("#savePort").on("click",function(){var u=t.data("validator"),n;(u.settings.ignore="",t.validate(),t.valid())&&(r.modal("hide"),i.value!==null&&i.value!==""&&b(i.value),n=[],n.push({PortId:f.value,PortType:e.value,PortName:o.value,PortBandwidthGbps:s.value,PortConnector:h.value,PortSfp:c.value,PortStatus:l.value,PortPool:v.value,PortRole:a.value,TenantId:y.value,IsNew:!0}),p(n).done(function(){d()}))});u.on("click",".mind-grid-delete-row",function(){var t=n(this).data("row-id");b(t);p()});u.on("click",".mind-grid-edit-row",function(){var u=n(this).data("row-id"),p=n("#port-grid-row_"+u),t=w(p);f.value=t.PortId;e.value=t.PortType;o.value=t.PortName;s.value=t.PortBandwidthGbps;h.value=t.PortConnector;c.value=t.PortSfp;l.value=t.PortStatus;v.value=t.PortPool;a.value=t.PortRole;y.value=t.TenantId;i.value=u;r.modal("show").off("hidden.bs.modal").on("hidden.bs.modal",function(){k()})});u.on("click",".mind-grid-copy-row",function(){var r=n(this).data("row-id"),u=n("#port-grid-row_"+r),t=w(u),i;t.PortId="";t.IsNew=!0;i=[];i.push(t);p(i).done(function(){d()})})})(jQuery);