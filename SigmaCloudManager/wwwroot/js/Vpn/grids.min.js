(n=>{function o(t){const r=y(t),u=JSON.stringify(r),i=n.Deferred();return Mind.Utilities.showSpinner("Fetching data from the server...."),n.post({url:"GetVpnAttachmentSetsGridData",contentType:"application/json; charset=utf-8",data:u}).done(t=>{n("#attachment-set-grid").find("tbody").html(t),p(),i.resolve()}).always(()=>Mind.Utilities.hideSpinner()),i.promise()}function y(t){typeof t=="undefined"&&(t=[]);const i=n("#attachment-set-grid").find("tbody tr");return i.each(function(){const i=n(this);t.push({VpnTopologyType:f.value,AttachmentSetName:i.data("name"),tenantName:i.data("tenant-name"),IsHub:i.data("is-hub"),Region:i.data("region"),AttachmentRedundancy:i.data("attachment-redundancy")})}),t}function p(){var t=n("#form");t.removeData("validator");t.removeData("unobtrusiveValidation");n.validator.unobtrusive.parse("#form")}const r=n("#AttachmentSet"),t=r[0],s=n("#TopologyType"),f=s[0],u=n("#TenantName"),e=u[0],i=n("#ProtocolType"),h=()=>{const u=n("#AddressFamily"),t=u[0],f=n("#TopologyType"),r=f[0];(i.val()===null||i.val()==="")&&(t.selectedIndex=0,t.disabled=!0,r.selectedIndex=0,r.disabled=!0);i.on("change",function(){this.value===null||this.value===""?(t.selectedIndex=0,t.disabled=!0,r.selectedIndex=0,r.disabled=!0):(Mind.Utilities.populateElement(u,"AddressFamilies",{protocolType:this.value}),Mind.Utilities.populateElement(f,"TopologyTypes",{protocolType:this.value}))})},c=()=>{n("#addAttachmentSet").on("click",function(){if(t.value!==null&&t.value!==""){const t=r.find(":selected"),i=n("#attachment-set-grid").find('td > input[type="text"]').filter(function(){return this.value===t.data("name")}).length>0;if(i)Mind.Utilities.showDuplicateItemDialog("Duplicate Attachment Set","The selected attachment set already exists.");else{let n=[];n.push({VpnTopologyType:f.value,AttachmentSetName:t.data("name"),tenantName:t.data("tenant-name"),region:t.data("region-name"),AttachmentRedundancy:t.data("attachment-redundancy")});o(n)}}})},l=()=>{n("#attachment-set-grid").on("click",".mind-grid-delete-row",function(){const t=n(this).data("row-id");n("#attachment-set-grid-row_"+t).remove();o()});n(".mind-grid").on("change",".mind-grid-checkbox",function(){this.value=this.checked;let t=n(this).parents("tr");t.data("is-hub",this.value)})},a=()=>{const i=n("#TenancyType"),r=n("#TenantId"),f=r[0];i.on("change",function(){t.selectedIndex=0;t.disabled=!0;this.value===null||this.value===""?(e.selectedIndex=0,e.disabled=!0):Mind.Utilities.populateElement(u,"ParticipantTenants",{ownerTenantId:f.value,tenancyType:this.value})})},v=()=>{u.on("change",function(){this.value===null||this.value===""?(t.selectedIndex=0,t.disabled=!0):Mind.Utilities.populateElement(r,"AttachmentSets",{tenantName:this.value})})};i.length>0&&h();c();l();a();v()})(jQuery);